---

- name: configure opendaylight -> ml2
  shell: >
    crudini --set /etc/neutron/plugins/ml2/ml2_conf.ini ml2 mechanism_drivers opendaylight;
    crudini --set /etc/neutron/plugins/ml2/ml2_conf.ini ml2 tenant_network_types vxlan;
    crudini --set /etc/neutron/plugins/ml2/ml2_conf.ini ovs enable_tunneling "True";
    crudini --set /etc/neutron/plugins/ml2/ml2_conf.ini ml2 extension_drivers port_security;
    crudini --set /etc/neutron/plugins/ml2/ml2_conf.ini ovs bridge_mappings physnet:br-provider;

- name: configure opendaylight in ml2
  shell: |
    crudini --set /etc/neutron/plugins/ml2/ml2_conf.ini ml2_odl username admin;
    crudini --set /etc/neutron/plugins/ml2/ml2_conf.ini ml2_odl password admin;
    crudini --set /etc/neutron/plugins/ml2/ml2_conf.ini ml2_odl url \
        http://{{ internal_lb_vip_address }}:8080/controller/nb/v2/neutron;
