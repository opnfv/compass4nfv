.. This work is licensed under a Creative Commons Attribution 4.0 International Licence.
.. http://creativecommons.org/licenses/by/4.0
.. two dots create a comment. please leave this logo at the top of each of your rst files.

Offline Deploy
==============

Compass4nfv uses a repo docker container as distro and pip package source
to deploy cluster and support complete offline deployment on a jumphost without
access internet. Here is the offline deployment instruction:

Preparation for offline deploy
------------------------------

1.  Download compass.tar.gz from OPNFV artifacts repository (Search compass4nfv in
    http://artifacts.opnfv.org/ and download an appropriate tarball. Tarball can also be
    generated by script build.sh in compass4nfv root directory.)

2.  Download the Jumphost preparation package from our httpserver. (Download the
    jumphost environment package from
    `here <http://artifacts.opnfv.org/compass4nfv/package/master/jh_env_package.tar.gz>`_.
    It should be awared that currently we only support ubuntu trusty as offline
    jumphost OS.)

3.  Clone the compass4nfv code repository.

Steps of offline deploy
-----------------------

1.  Copy the compass.tar.gz, jh_env_package.tar.gz and the compass4nfv code
    repository to your jumphost.

2.  Export the local path of the compass.tar.gz and jh_env_package.tar.gz on
    jumphost. Then you can perform deployment on a offline jumphost.

E.g.

Export the compass4nfv.iso and jh_env_package.tar.gz path

.. code-block:: bash

    # ISO_URL and JHPKG_URL should be absolute path
    export ISO_URL=file:///home/compass/compass4nfv.iso
    export JHPKG_URL=file:///home/compass/jh_env_package.tar.gz

3.  Open the OSA offline deployment switch on jumphost.

.. code-block:: bash

    export OFFLINE_DEPLOY=Enable

4.  Run deploy.sh

.. code-block:: bash

    ./deploy.sh
